(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"imageGalleryItem_ImageGalleryItem__2fV_X",ImageGalleryItemImage:"imageGalleryItem_ImageGalleryItemImage__1m-Er"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2mjcs",Modal:"Modal_Modal__2k_hl"}},25:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__1BoUp"}},27:function(e,t,a){e.exports={Button:"Button_Button__Dh_hk"}},28:function(e,t,a){e.exports=a(72)},71:function(e,t,a){e.exports={App:"App_App__3xSGx"}},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),c=a.n(o),i=a(12),l=a(3),s=a(4),m=a(6),u=a(5),h=a(7),d=a(23),g=a(9),p=a(8),f=a.n(p),b=a(24),y=a.n(b),v={page:1,fetchImages:function(e){var t=this,a="&page=".concat(this.page,"&key=").concat("15216450-d096caa7dd5d740f777344039","&image_type=photo&orientation=horizontal&per_page=12");return y.a.get("https://pixabay.com/api/?q="+e+a).then((function(e){var a=e.data;return t.incrementPage(),a.hits}))},incrementPage:function(){this.page+=1},resetPage:function(){this.page=1}},S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(g.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),v.resetPage(),a.props.onSubmit(Object(d.a)({},a.state)),a.reset()},a.reset=function(){a.setState({name:""})},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:f.a.Searchbar},r.a.createElement("form",{onSubmit:this.handleSubmit,className:f.a.SearchForm},r.a.createElement("button",{type:"submit",className:f.a.SearchFormButton},r.a.createElement("span",{className:f.a.SearchFormButtonLabel},"Search")),r.a.createElement("input",{className:f.a.SearchFormInput,type:"text",name:"name",value:this.state.name,autoComplete:"off",autoFocus:!0,onChange:this.handleChange,placeholder:"Search images and photos"}))))}}]),t}(n.Component),_=a(25),E=a.n(_),I=a(10),O=a.n(I),k=function(e){var t=e.items;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("li",{key:e.id,className:O.a.ImageGalleryItem},r.a.createElement("img",{src:e.webformatURL,"data-sourse":e.largeImageURL,alt:"some image",className:O.a.ImageGalleryItemImage}))})))},w=function(e){var t=e.items;return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:E.a.ImageGallery},r.a.createElement(k,{items:t})))},M=a(26),j=a.n(M),B=function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(j.a,{type:"ThreeDots",color:"blue",height:200,width:300}))},L=a(27),F=a.n(L),G=function(e){var t=e.onLoadMore;return r.a.createElement("button",{onClick:t,type:"button",className:F.a.Button},"Load more")},C=a(11),x=a.n(C),A=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).backdropRef=Object(n.createRef)(),a.handleKeyPress=function(e){"Escape"===e.code&&a.props.onClose()},a.handleBackdropClick=function(e){var t=a.backdropRef.current;t&&e.target!==t||a.props.onClose()},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props.children;return r.a.createElement("div",{className:x.a.Overlay,ref:this.backdropRef,onClick:this.handleBackdropClick},r.a.createElement("div",{className:x.a.Modal},e))}}]),t}(n.Component),N=(a(71),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={images:[],isLoading:!1,isModalOpen:!1,query:"",imageOnModal:"",error:null},a.onSubmit=function(e){var t=e.name;a.setState({query:t})},a.buttonLoadMore=function(){v.fetchImages(a.state.query).then((function(e){a.setState((function(t){return{images:[].concat(Object(i.a)(t.images),Object(i.a)(e))}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){return console.log(e)}))},a.openModalAndGiveBigImage=function(e){if("IMG"===e.target.nodeName){a.setState({isModalOpen:!0});var t=e.target.getAttribute("data-sourse");a.setState({imageOnModal:t})}},a.closeModal=function(){return a.setState({isModalOpen:!1})},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(t.query!==this.state.query){this.setState({isLoading:!0});var n=this.state.query;v.fetchImages(n).then((function(e){a.setState({images:e})})).catch((function(e){return a.setState({error:e})})).finally((function(){return a.setState({isLoading:!1})}))}}},{key:"componentDidMount",value:function(){window.addEventListener("click",this.openModalAndGiveBigImage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.openModalAndGiveBigImage)}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.isLoading,n=e.isModalOpen,o=e.imageOnModal,c=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{onSubmit:this.onSubmit}),c&&r.a.createElement("h2",{style:{color:"red",textAlign:"center"}},"Whoops, something went wrong: ",c.message,", try again later..."),a?r.a.createElement(B,null):r.a.createElement(w,{items:t}),t.length>0&&r.a.createElement(G,{onLoadMore:this.buttonLoadMore}),n&&r.a.createElement(A,{onClose:this.closeModal},r.a.createElement("img",{src:o,"data-sourse":o,alt:"some alt"})))}}]),t}(n.Component));c.a.render(r.a.createElement(N,null),document.getElementById("root"))},8:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__16zgi",SearchForm:"Searchbar_SearchForm__2wgMh",SearchFormButton:"Searchbar_SearchFormButton__3W850",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__3B4wt",SearchFormInput:"Searchbar_SearchFormInput__3S4Uv"}}},[[28,1,2]]]);
//# sourceMappingURL=main.dd766030.chunk.js.map